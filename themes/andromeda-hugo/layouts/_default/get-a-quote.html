{{ define "main" }}

{{ partial "components/page-header.html" . }}

<section class="section">
  <div class="container">
    <div class="row justify-content-center align-items-center">
      <div class="col-lg-5 col-md-8 text-center mb-5 mb-lg-0" data-aos="fade-up">
        <div class="pr-0 pr-lg-5">
          {{ if fileExists (add `assets/` .Params.contact_image) }}
          {{$img:= resources.Get .Params.contact_image }}
          {{$img:= $img.Resize "575x"}}
          <img loading="lazy" decoding="async" class="img-fluid" width="{{$img.Width}}" height="{{$img.Height}}" src="{{$img.RelPermalink}}" alt="contact image" onerror="this.onerror=null;this.src='{{$img.RelPermalink}}'">
          {{end}}
        </div>
      </div>
      {{with site.Params.contact_form_action}}
      <div class="col-lg-5 col-md-10" data-aos="fade-up">
        <div class="contact-form">
          <div class="mb-4">
            <h3>{{i18n `get_a_quote`}}</h3>
          </div>
          <form id="get-a-quote-form" class="kwes-form" action="https://kwesforms.com/api/foreign/forms/ko0cgu3EDpVrAo3n4ANw" method="POST" multistep="true">
            <div class="kw-multistep">
              <p id="form-status" class="form-status"></p>
                <div class="kw-multistep-step" form-step-heading="Your pet's info &#128021;">
                <div class="kw-multistep-body">
                  <fieldset repeater name="pets_info" repeater-limit="3">
                    <div repeater-group>
                      <div class="form-group">
                        <label for="name">{{i18n `pets_name`}}</label>
                        <input class="form-control shadow-none" id="name" name="pets_name" type="text" placeholder="{{i18n `pets_name`}}" required>
                      </div>
                      <div class="form-group">
                        <label for="pets_age">{{i18n `age`}}</label>
                        <input class="form-control shadow-none" id="pets_age" name="age" type="text" placeholder="{{i18n `age_placeholder`}}" required>
                      </div>
                      <div class="form-group">
                        <label for="species">{{i18n `species`}}</label>
                        <input class="form-control shadow-none" id="species" name="species" type="text" placeholder="{{i18n `species_placeholder`}}" required>
                      </div>
                      <div class="form-group">
                        <label for="breed">{{i18n `breed`}}</label>
                        <input class="form-control shadow-none" id="breed" name="breed" type="text" placeholder="{{i18n `breed_placeholder`}}" required>
                      </div>
                      <div class="form-group">
                        <label for="weight">{{i18n `weight`}}</label>
                        <input class="form-control shadow-none" id="weight" name="weight" type="text" placeholder="{{i18n `weight`}}" required>                  
                      </div>
                      <div class="form-group">
                        <label for="length">{{i18n `length`}}</label>
                        <input class="form-control shadow-none" id="length" name="length" type="text" placeholder="{{i18n `length_placeholder`}}" required>                  
                      </div>
                      <div class="form-group">
                        <label for="height">{{i18n `height`}}</label>
                        <input class="form-control shadow-none" id="height" name="Height" type="text" placeholder="{{i18n `height_placeholder`}}" required>                  
                      </div>
                    </div>  
                  </fieldset>
                </div>
                </div>
                <div class="kw-multistep-step" form-step-heading="Step 2">
                <div class="kw-multistep-body">
                      <div class="form-group">
                        <label for="email">{{i18n `email`}}</label>
                        <input class="form-control shadow-none" id="email" name="email" type="email" placeholder="{{i18n `email_placeholder`}}" required>
                      </div>
                      <div class="form-group">
                        <label for="message">{{i18n `your_message`}}</label>
                        <textarea class="form-control shadow-none" id="message" name="Comment1" rows="4" required></textarea>
                      </div>                     
                    <button class="btn btn-primary w-100 mt-4" type="submit" aria-label="Send Message">{{i18n `send_message`}}</button>
                </div>
                </div>
            </div>  
          </form>
        </div>
      </div>

      <script>
        var form = document.getElementById('contact-form');
        async function handleSubmit(event) {
          event.preventDefault();
          var status = document.getElementById("form-status");
          var data = new FormData(event.target);
          fetch(event.target.action, {
            method: form.method,
            body: data,
            headers: {
              'Accept': 'application/json'
            }
          }).then(response => {
            status.innerHTML = "{{i18n `form_thanks_message`}}";
            form.reset()
          }).catch(error => {
            status.innerHTML = "{{i18n `form_error_message`}}";
          });
        }
        form.addEventListener("submit", handleSubmit)
      </script>
      {{end}}
    </div>

    <div class="section pb-0">
      <div class="row justify-content-center">
        <div class="col-12">
          <div class="section-title text-center" data-aos="fade-up">
            <p class="text-uppercase">{{i18n `contact_us`}}</p>
            <h2 class="title">{{i18n `get_in_touch`}}</h2>
          </div>
        </div>

        {{with site.Params.contact_info.phone}}
        <div class="col-xl-3 col-lg-4 col-md-6 contact-widget" data-aos="fade-up">
          <div class="block text-center">
            <h3 class="mb-4">{{i18n `phone`}}</h3>
            <ul class="list-unstyled">
              {{range .}}
              {{if .}}
              <li><a href="tel:{{.}}"><i class="las la-phone"></i>{{.}}</a></li>
              {{end}}
              {{end}}
            </ul>
          </div>
        </div>
        {{end}}

        {{with site.Params.contact_info.email}}
        <div class="col-xl-3 col-lg-4 col-md-6 contact-widget" data-aos="fade-up" data-aos-delay="100">
          <div class="block text-center">
            <h3 class="mb-4">{{i18n `email`}}</h3>
            <ul class="list-unstyled">
              {{range .}}
              {{if .}}
              <li><a href="mailto:{{.}}"><i class="las la-envelope-open-text"></i>{{.}}</a></li>
              {{end}}
              {{end}}
            </ul>
          </div>
        </div>
        {{end}}

        {{with site.Params.social}}
        <div class="col-xl-3 col-lg-4 col-md-12 contact-widget" data-aos="fade-up" data-aos-delay="200">
          <div class="block text-center">
            <h3 class="mb-4">{{i18n `social_media`}}</h3>
            <ul class="list-unstyled">
              {{range .}}
              {{if .}}
              <li><a href="{{.link}}"><i class="{{.icon}}"></i>{{.title}}</a></li>
              {{end}}
              {{end}}
            </ul>
          </div>
        </div>
        {{end}}
      </div>
    </div>
  </div>
</section>

{{ end }}